---
default role: organizer
code: |
  role = 'organizer'
  if current_info['user']['is_authenticated']:
    if current_info['user'].email == first_person_email:
      role = 'first_person'
    elif current_info['user'].email == second_person_email:
      role = 'second_person'
---
event: role_event
question: Waiting on another participant
subquestion: |
  % if role_needed in ['first_person', 'second_person']:
  We are waiting for a participant to put in a bid.
  % else:
  We are waiting for the organizer.
  % endif
  % if not current_info['user']['is_authenticated']:
  If you are a participant, click "Sign in."
  % endif
---
mandatory: true
code: |
  need(invite_participants)
  need(announce_winner)
---
question: |
  Invite the bidders
subquestion: |
  Ok, organizer, send e-mails to ${ first_person_email } and
  ${ second_person_email } inviting them to submit bids.

  Tell them to go to the following URL:

  ${ current_info['url'] }?i=${ current_info['yaml_filename'] }&session=${ current_info['session'] }
field: invite_participants
---
role:
  - organizer
  - first_person
  - second_person
sets: announce_winner
question: And the winner is...
subquestion: |
  % if first_person_bid < second_person_bid:
  The winning bidder is First Person!
  % elif first_person_bid > second_person_bid
  The winning bidder is Second Person!
  % else:
  Sorry, no winner.  The bids matched.
  % endif
---
question: |
  What are the e-mail addresses of the participants?
fields:
  - First Person: first_person_email
    datatype: email
  - Second Person: second_person_email
    datatype: email
---
role: first_person
question: |
  How much will you bid for the contract?
fields:
  - Amount: first_person_bid
    datatype: currency
---
role: second_person
question: |
  How much will you bid for the contract?
fields:
  - Amount: second_person_bid
    datatype: currency
---

