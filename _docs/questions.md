---
layout: docs
title: Question Blocks
short_title: Questions
---

## Posing the question

### question

{% highlight yaml %}
---
question: What is the airspeed velocity of an unladen swallow?
fields:
  - Velocity: swallow_velocity
---
{% endhighlight %}

The `question` is the main question, or the title of the page.  It
appears at the top of the page.  You can place an icon to the right of
it using `decoration`.

Like most things in **docassemble**, it can contain [Mako] and
[Markdown].  For example:

{% highlight yaml %}
---
question: |
  What is the airspeed velocity of an unladen ${ african_or_european }
  swallow?
fields:
  - Velocity: swallow_velocity
---
{% endhighlight %}

Every screen that a user sees is generated by a block containing a
`question`.  All blocks in an interview file must either be
[initial blocks]({{ site.baseurl }}/initial.html), or contain a
`question`, or contain `code`.

### subquestion

{% highlight yaml %}
---
question: What is the airspeed velocity of an unladen swallow?
subquestion: Be careful how you answer.
fields:
  - Velocity: swallow_velocity
---
{% endhighlight %}

The optional `subquestion` adds text underneath the `question`.  It is
typically used to explain the question in more detail, if explanation
is necessary.

## Using questions to set variables

Every `question` block in a **docassemble** interview must have a
purpose.  Otherwise, **docassemble** would never have a reason for
asking the question.  Questions are given a purpose with one of the
following extra statements:

* `yesno` (or its opposite, `noyes`): the question will set a variable
  when a Yes or No button is pressed.
* `field`: the question will set a variable when a "Continue" button
  is pressed.
* `fields`: the question will set one or more variables when
  "Continue" is pressed.
* `sets`: advertises to the interview logic that a variable may be set
  by asking the question, which may in fact be set by a button, or
  perhaps no buttons will even be offered.
* `event`: advertises to the interview logic that the question should
  be asked if an special event occurs, such as a user not being able
  to proceed with an interview because the interview logic requires
  information from a person in a different role.

### yesno

{% highlight yaml %}
---
question: Were you injured?
yesno: user_has_injury
---
{% endhighlight %}

The `yesno` statement causes a question to set a boolean (true/false)
variable when answered.

In the example above, the web app will present "Yes" and "No" buttons
and will set `user_has_injury` to `True` if "Yes" is pressed, and
`False` if "No" is pressed.

### noyes

{% highlight yaml %}
---
question: Were you not injured?
noyes: user_has_injury
---
{% endhighlight %}

The `noyes` statement is just like `yesno`, except that "Yes" means
`False` and "No" means `True`.

### buttons

{% highlight yaml %}
---
field: user_understands
question: Do you understand what I have explained to you?
buttons:
  - "I understand": understands
  - "I do not understand": does not understand
  - "I'm not sure": I'm not sure
---
{% endhighlight %}

(Note that in the example above, quotation marks are used because the
apostrophe in "I'm not sure" would otherwise confuse the [YAML]
parser.)

A `question` block with a `buttons` statement will set the variable
identified in `field` to a particular value depending on which of the
buttons the user presses.

The `buttons` statement must always refer to a [YAML] list, so that
**docassemble** knows the order of the buttons.

Each item under `buttons` can either be a [YAML] key-value pair
(written in the form of "- key: value"), where the key is the button
label that the user sees and the value is what the variable identified
in `field` will be set to if the user presses that button.

An item under `buttons` can also be plain text; in that case
**docassemble** uses the text for both the label and the variable
value.  For example, this:

{% highlight yaml %}
---
field: user_gender
question: What is your gender?
buttons:
  - Male
  - Female
---
{% endhighlight %}

is equivalent to:

{% highlight yaml %}
---
field: user_gender
question: What is your gender?
buttons:
  - Male: Male
  - Female: Female
---
{% endhighlight %}

A powerful feature of `buttons` is the ability to use Python code to
generate button choices.  If an item under `buttons` is a key-value
pair in which the key is the word `code`, then **docassemble**
executes the value as Python code, which it expects to return a list.
This code is executed at the time the question is asked, and the code
can include variables from the interview.  **docassemble** will
process the resulting list and create additional buttons for each
item.  To illustrate this, the first example above could alternatively
have been written as:

{% highlight yaml %}
---
field: user_understands_no_attorney_client_relationship
question: >-
  Your use of this system does not mean that you have a lawyer.  Do
  you understand this?
buttons:
  - "I understand": understands
  - code: |
      [{'does not understand':"I do not understand"}, {'unsure':"I'm not sure"}]
---
{% endhighlight %}

Note that the Python code needs to return key-value pairs (Python
dictionaries) where the key is what the variable should be set to and
the value is the button label.  This is different from the [YAML]
syntax.

### field

coming soon

### fields

coming soon

### sets

coming soon

## Providing documents

coming soon

### attachments

The `attachments` statement (which can also be written `attachment`)
provides documents to the user, which can be previewed, downloaded,
and/or e-mailed.

## Modifiers

There are a number of optional modifiers that can be included in
question blocks to control the appearance or behavior of the question

### help

{% highlight yaml %}
---
question: How much money do you wish to seek in damages?
fields:
  - Money: damages_sought
    datatype: currency
help: |
  If you are not sure how much money to seek in damages, just ask
  for a million dollars, since you want ${ defendant } to suffer.
---
{% endhighlight %}

In the web app, users can use the navigation bar to toggle between the
"Question" tab and the "Help" tab.  The contents of the "Help" tab
consist of the contents of any `help` statements in the question being
presented, followed by the contents of any `interview help` blocks
contained within the interview.

### decoration

{% highlight yaml %}
---
question: Have you been saving your money?
yesno: user_has_saved_money
decoration: piggybank
---
{% endhighlight %}

The `decoration` modifier adds an icon to the right of the `question`
text.  In the example above, `piggybank` will need to have been
defined in an `image sets` or `images` block.

### progress

{% highlight yaml %}
---
question: Are you doing well?
yesno: user_is_well
progress: 50
---
{% endhighlight %}

If **docassemble** is configured to show a progress bar, the progress
bar will be set to 50% when this question is asked.

### generic object

{% highlight yaml %}
---
generic object: Individual
question: |
  So, ${ x.is_are_you() } a defendant in this case?
yesno: x.is_defendant
---
{% endhighlight %}

`generic object` is a very powerful feature in **docassemble** that
allows authors to express questions in general terms.

The above example will cause **docassemble** to ask "So, is John Smith
a defendant in this case?" if the interview logic calls for
`neighbor.is_defendant` and `neighbor` is an object of type
`Individual` whose name has been set to "John Smith."  Or, if the
interview logic calls for `user.is_defendant`, **docassemble** will
ask, "So, are you a defendant in this case?"

`x` is a special variable that should only be used in `generic object`
questions.  This question definition tells **docassemble** that if it
ever needs an `is_defendant` attribute for any object of type
`Individual`, it can get an answer by asking this question.

### role

{% highlight yaml %}
---
role: advocate
question: Is the client's explanation a sound one?
subquestion: |
  ${ client } proposed the following explanation:
  
  > ${ explanation }

  Is this a legally sufficient explanation?
yesno: explanation_is_sound
---
{% endhighlight %}

If your interview uses the [roles]({{ site.baseurl}}/docs/roles.html)
feature for multi-user interviews, the `role` modifier in a `question`
block will tell **docassemble** that if it ever tries to ask this
question, the user will need to have a particular role in order to
proceed.

`role` can be a list.
{% highlight yaml %}
role:
  - advocate
  - supervisor
{% endhighlight %}
In this case, the user's role can either "advocate" or "supervisor" in
order to be asked the question.

If the user does not have an appropriate role, **docassemble** will
look for a question in the interview in which `event` has been set to
`role_event`.

### comment

{% highlight yaml %}
---
question: Do you agree the weather is nice today? 
yesno: day_is_nice
comment: |
  We might wish to consider taking out this question.  It does not
  seem necessary.
---
{% endhighlight %}

To make a note to yourself about a question, which will not be seen by
the end user, you can use a `comment` statement.  It will not be
ignored by **docassemble**, so it can contain any valid [YAML].

[Mako]: http://www.makotemplates.org/
[Markdown]: https://daringfireball.net/projects/markdown/
[YAML]: [YAML]: https://en.wikipedia.org/wiki/YAML
